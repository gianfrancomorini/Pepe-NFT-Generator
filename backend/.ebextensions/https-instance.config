option_settings:
  aws:elasticbeanstalk:environment:
    LoadBalancerType: application
  
  # HTTP Listener (Redirect to HTTPS)
  aws:elbv2:listener:80:
    DefaultProcess: default
    ListenerEnabled: true
    Protocol: HTTP
    Rules: httpsredirect
  
  aws:elbv2:listenerrule:httpsredirect:
    PathPatterns: /*
    Priority: 1
    Process: redirect
  
  aws:elasticbeanstalk:environment:process:redirect:
    Port: 443
    Protocol: HTTPS
  
  # HTTPS Listener
  aws:elbv2:listener:443:
    DefaultProcess: default
    ListenerEnabled: true
    Protocol: HTTPS
    SSLCertificateArns: arn:aws:acm:us-west-1:476114128052:certificate/b61c7b80-67e2-4a3a-a713-cd2e669f1e43
  
  # Process Settings
  aws:elasticbeanstalk:environment:process:default:
    HealthCheckPath: /health
    Port: 80
    Protocol: HTTP

  # Enable cross-zone load balancing
  aws:elb:loadbalancer:
    CrossZone: true